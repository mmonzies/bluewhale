<link rel="import" href="../../../bower_components/polymer/polymer.html">

<dom-module id="bloc-note">
  <template>
    <style include="shared-styles"></style>
    <style>
      :host {
        display: block
      color: #333;
      }
    </style>

    <paper-fab id="fab" icon="create" on-tap="toggleNewTopicDialog"></paper-fab>

    <paper-toast id="saveMsg" text="Sauvegardé"></paper-toast>

    <paper-fullscreen-dialog id="dialog2">
      <h2>Edit This</h2>
      <paper-button affirmative on-tap="save">Save</paper-button>
      <p>The "X" button indicates any changes will be discarded when dismissed</p>
      <div>The confirmation action is disabled until all required actions are performed.</div>
      <form enctype="multipart/form-data" is="ajax-form" id="note_form" method="post" action="/note/save" on-submitted="showMessage">
       <div horizontal layout>
          <paper-input label="Titre" name="title" floatingLabel required>
        </div>
        <div horizontal layout>
          <input type="hidden" name="summary" value="{{text}}">
          <paper-textarea value="{{text}}" label="R&eacute;sum&eacute;"></paper-textarea>
        </div>
        <div horizontal layout>
          <paper-input label="Lien" name="link" floatingLabel>
        </div>
        <div horizontal layout>
          <file-upload name="file" manualUpload="true" droppable="true" raised="true" accept="image/*" target="/note/saveNoteFile" method="POST">
          	Sélectionner un fichier
          </file-upload>
        </div>
      </form>
    </paper-fullscreen-dialog>
  </template>
  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'bloc-note',

        toggleNewTopicDialog: function() {
          this.$.dialog2.toggle();
        },
        save: function() {
          this.$.note_form.submit();
        },
        showMessage: function() {
            this.$.saveMsg.show();
        }
      });
    })();
  </script>

</dom-module>
